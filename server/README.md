# 91å†™ä½œåŠ©æ‰‹ - AIå°è¯´åˆ›ä½œå¹³å°åç«¯

ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„ç½‘æ–‡åˆ›ä½œè¾…åŠ©å¹³å°ï¼Œæä¾›æ™ºèƒ½ç»­å†™ã€è§’è‰²ç”Ÿæˆã€å‰§æƒ…å»ºè®®ã€ä¸–ç•Œè§‚æ„å»ºç­‰åŠŸèƒ½ï¼Œå¸®åŠ©ä½œè€…æå‡åˆ›ä½œæ•ˆç‡ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **AIæ™ºèƒ½ç»­å†™** - åŸºäºä¸Šä¸‹æ–‡çš„æ™ºèƒ½æ–‡æœ¬ç»­å†™
- **è§’è‰²ç”Ÿæˆ** - è‡ªåŠ¨ç”Ÿæˆä¸°å¯Œçš„è§’è‰²è®¾å®š
- **å‰§æƒ…å»ºè®®** - æ™ºèƒ½å‰§æƒ…å‘å±•å»ºè®®
- **ä¸–ç•Œè§‚æ„å»º** - å®Œæ•´çš„ä¸–ç•Œè§‚è®¾å®šç”Ÿæˆ
- **æ–‡æœ¬æ¶¦è‰²** - AIè¾…åŠ©æ–‡æœ¬ä¼˜åŒ–å’Œæ¶¦è‰²
- **å¤§çº²ç”Ÿæˆ** - æ™ºèƒ½å°è¯´å¤§çº²åˆ›å»º

### ç®¡ç†åŠŸèƒ½
- **ç”¨æˆ·ç®¡ç†** - å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- **ä¼šå‘˜ç³»ç»Ÿ** - å¤šå±‚çº§ä¼šå‘˜æƒç›Šç®¡ç†
- **æ”¯ä»˜ç³»ç»Ÿ** - é›†æˆç¬¬ä¸‰æ–¹æ”¯ä»˜æ¥å£
- **å†…å®¹ç®¡ç†** - å°è¯´ã€ç« èŠ‚ã€è§’è‰²ç­‰å†…å®¹ç®¡ç†
- **æ•°æ®ç»Ÿè®¡** - è¯¦ç»†çš„ä½¿ç”¨æ•°æ®åˆ†æ

### ç³»ç»Ÿç‰¹æ€§
- **å¤šAIæ¨¡å‹æ”¯æŒ** - æ”¯æŒå¤šç§AIæ¨¡å‹æ¥å…¥
- **åˆ†å¸ƒå¼æ¶æ„** - Redisç¼“å­˜ï¼ŒMySQLæ•°æ®åº“
- **RESTful API** - æ ‡å‡†åŒ–APIæ¥å£
- **å®‰å…¨é˜²æŠ¤** - JWTè®¤è¯ï¼Œæ•°æ®åŠ å¯†
- **æ—¥å¿—ç›‘æ§** - å®Œæ•´çš„æ—¥å¿—è®°å½•å’Œç›‘æ§

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Node.js + Express
- **æ•°æ®åº“**: MySQL + Sequelize ORM
- **ç¼“å­˜**: Redis
- **è®¤è¯**: JWT
- **æ—¥å¿—**: Winston
- **æ”¯ä»˜**: è“å…”æ”¯ä»˜
- **AIæœåŠ¡**: æ”¯æŒå¤šç§AIæ¨¡å‹æ¥å…¥

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- MySQL >= 5.7
- Redis >= 5.0
- npm æˆ– pnpm

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd 91å†™ä½œå•†ä¸šç‰ˆåç«¯
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
# æˆ–ä½¿ç”¨ pnpm
pnpm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
vim .env
```

4. **é…ç½®ç¯å¢ƒå˜é‡**

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å…³é”®å‚æ•°ï¼š

```env
# åº”ç”¨é…ç½®
APP_SECRET=your-app-secret-key
JWT_SECRET=your-jwt-secret-key
ENCRYPT_SECRET=your-encrypt-secret-key

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=ai_novel
DB_USER=root
DB_PASSWORD=your-database-password

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# ç®¡ç†å‘˜è´¦æˆ·ï¼ˆç”¨äºåˆå§‹åŒ–ï¼‰
ADMIN_PASSWORD=your-admin-password
TEST_USER_PASSWORD=your-test-password
```

5. **æ•°æ®åº“åˆå§‹åŒ–**
```bash
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
node scripts/init-database.js
```

6. **å¯åŠ¨æœåŠ¡**
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®

é¡¹ç›®ä½¿ç”¨ MySQL ä½œä¸ºä¸»æ•°æ®åº“ï¼Œé…ç½®æ–‡ä»¶ä½äº `config/database.js`ã€‚

### Redisé…ç½®

ç”¨äºç¼“å­˜å’Œä¼šè¯ç®¡ç†ï¼Œé…ç½®æ–‡ä»¶ä½äº `config/redis.js`ã€‚

### AIæ¨¡å‹é…ç½®

æ”¯æŒå¤šç§AIæ¨¡å‹ï¼Œå¯åœ¨ç®¡ç†åå°åŠ¨æ€é…ç½®APIå¯†é’¥å’Œå‚æ•°ã€‚

### æ”¯ä»˜é…ç½®

é›†æˆè“å…”æ”¯ä»˜ï¼Œæ”¯æŒæ‰«ç æ”¯ä»˜ã€è®¢å•æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ app.js                 # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ database.js        # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ redis.js          # Redisé…ç½®
â”‚   â””â”€â”€ siteSettings.json  # ç«™ç‚¹è®¾ç½®
â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”œâ”€â”€ router/                # è·¯ç”±æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ ai-business/       # AIä¸šåŠ¡ç›¸å…³è·¯ç”±
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/              # ä¸šåŠ¡æœåŠ¡å±‚
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ public/                # é™æ€èµ„æº
â””â”€â”€ ...
```

## ğŸ” å®‰å…¨è¯´æ˜

### ç¯å¢ƒå˜é‡
- æ‰€æœ‰æ•æ„Ÿé…ç½®å‡é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
- è¯·å‹¿å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨å¼ºå¯†ç å’Œå®‰å…¨çš„å¯†é’¥

### æ•°æ®å®‰å…¨
- ç”¨æˆ·å¯†ç ä½¿ç”¨bcryptåŠ å¯†å­˜å‚¨
- JWT tokenç”¨äºç”¨æˆ·è®¤è¯
- æ•æ„Ÿæ•°æ®ä¼ è¾“ä½¿ç”¨HTTPS

### APIå®‰å…¨
- å®æ–½äº†è¯·æ±‚é¢‘ç‡é™åˆ¶
- è¾“å…¥æ•°æ®éªŒè¯å’Œè¿‡æ»¤
- SQLæ³¨å…¥é˜²æŠ¤

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# æ„å»ºé•œåƒ
docker build -t ai-novel-backend .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name ai-novel-backend \
  -p 3000:3000 \
  --env-file .env \
  ai-novel-backend
```

### PM2éƒ¨ç½²

```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start app.js --name "ai-novel-backend"

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs ai-novel-backend
```

## ğŸ“Š APIæ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/login` - ç”¨æˆ·ç™»å½•
- `POST /api/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/logout` - ç”¨æˆ·ç™»å‡º

### AIåŠŸèƒ½æ¥å£
- `POST /api/ai/continue` - æ™ºèƒ½ç»­å†™
- `POST /api/ai/character` - è§’è‰²ç”Ÿæˆ
- `POST /api/ai/plot` - å‰§æƒ…å»ºè®®
- `POST /api/ai/worldview` - ä¸–ç•Œè§‚æ„å»º

### å†…å®¹ç®¡ç†æ¥å£
- `GET /api/novels` - è·å–å°è¯´åˆ—è¡¨
- `POST /api/novels` - åˆ›å»ºå°è¯´
- `PUT /api/novels/:id` - æ›´æ–°å°è¯´
- `DELETE /api/novels/:id` - åˆ é™¤å°è¯´

æ›´å¤šAPIè¯¦æƒ…è¯·å‚è€ƒåœ¨çº¿æ–‡æ¡£æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ å¼€å‘è§„èŒƒ

- éµå¾ª ESLint ä»£ç è§„èŒƒ
- æäº¤ä¿¡æ¯ä½¿ç”¨è¯­ä¹‰åŒ–æ ¼å¼
- æ–°åŠŸèƒ½éœ€è¦æ·»åŠ ç›¸åº”æµ‹è¯•
- é‡è¦å˜æ›´éœ€è¦æ›´æ–°æ–‡æ¡£

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š

- æäº¤ GitHub Issue
- å‘é€é‚®ä»¶è‡³ï¼šadmin@example.com
- åŠ å…¥æŠ€æœ¯äº¤æµç¾¤

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ã€‚

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œä¸å¾—ç”¨äºéæ³•ç”¨é€”ã€‚